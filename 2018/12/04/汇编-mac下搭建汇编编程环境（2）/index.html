<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">

  
  <script src="/js/script.js"></script>
  

  <title>caozhenwei</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/bootstrap.css" >
</head>
  <body>
    <header class="header-content">
<div class="header">
  <div class="blog-title">
    <img class="logo" src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/header_image_small.jpeg">
    <a href="/" class="title">caozhenwei</a>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">Home</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">Archives</a>
        </li>
      
    </ul>
  </nav>
</div>
</header>
    <main class="main">
      <div class="content">
  <article class="article">
    <div class="article-detail">
      <!-- 标题 -->
      <div class="article-title">
        <h2 class="title">汇编--mac下搭建汇编编程环境（2）</h2>
      </div>

      <!-- 时间 -->
      <div class="article-meta">
        <span class="article-time">2018-12-04</span>
      </div>

      <!-- 文章内容 -->
      <div class="article-content">
        <p>实践是检验真理的唯一标准，上篇通过学习后这里在通过实战能更好的巩固已经学到的知识。本文将介绍怎么在 mac 环境下搭建汇编编程环境和 debuge 的基本用法。</p>
<a id="more"></a>
<h4 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h4><p>在 mac 上搭建汇编环境首先要用到两个软件 DOSBox 和 asm5 。这连个工具在<a href="https://github.com/caozhenwei/blog_pic/tree/master/software">这里</a>可以下载。</p>
<p>运行 DOSBox 后挂载<br>mount c ~/Dos/masm5         因为我的 masm5 文件夹在这里： ~/Dos/masm5</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/1.png" alt="1"></p>
<p>编写汇编程序，可以先不用知道具体汇编指令是什么意思，这里主要是想展示下汇编代码怎么通过编译链接成为最终的可执行问津。例如我的 hello.asm 内容如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">assume cs:codesg</span><br><span class="line">codesg segment</span><br><span class="line"></span><br><span class="line">start: mov ax,0123H</span><br><span class="line">       mov bx,0456H</span><br><span class="line">       add ax,bx</span><br><span class="line">       </span><br><span class="line">       mov ax,4c00h</span><br><span class="line">       int 21H</span><br><span class="line">codesg ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>通过挂载后要进入 c 盘，命令如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">c：</span><br></pre></td></tr></table></figure>
<p>编译：masm hello.asm</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/2.png" alt="2"></p>
<p>链接:link hell0.obj</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/3.png" alt="3"></p>
<p>运行：hello.exe</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/4.png" alt="4"></p>
<h4 id="调试常用命令"><a href="#调试常用命令" class="headerlink" title="调试常用命令"></a>调试常用命令</h4><p>r 查看、改变 CPU 寄存器的内容，如下所示的为修改 ax 中的内容<br><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/5.png" alt="5"></p>
<p>d 命令查看内存中的内容 查看 10000H 处的内存命令如下所示</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/6.png" alt="6"></p>
<p>e 命令来修改内存中的内容，如下所示</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/7.png" alt="7"></p>
<p>用 e 命令向机器中写入机器码，并用 u 命令查看</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/8.png" alt="8"></p>
<p>用 t 命令执行机器指令，首页要把 CS：IP 设置下，如下所示</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/9.png" alt="9"></p>
<p>可以使用 g 命令让程序跑完。</p>
<p>用 a 命令以汇编的形式向内存中写入指令</p>
<p><img src="https://raw.githubusercontent.com/caozhenwei/blog_pic/master/asm/mac下搭建汇编编程环境/10.png" alt="10"></p>

      </div>
    </div>
  </article>

  <!-- 目录 -->
  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">目录</strong>
    
        <ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#环境搭建"><span class="nav-text">环境搭建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#调试常用命令"><span class="nav-text">调试常用命令</span></a></li></ol>
    
    </div>
  </aside>
</div>

<footer id="footer">
    <p> Powered_by
     <a href="http://hexo.io/" target="_blank">Hexo</a>
     and 
     <a href="https://github.com/caozhenwei/zw_theme" target="_blank">Hexo-theme-zw_theme  
     </a> 
      , copyright &copy; 2018 - 2019 caozhenwei All Rights Reserved.
    </p>
</footer>
    </main>
  </body>
</html>